# 환경 변수 설정 방법 (2025년 11월 기준)

## 문제
Firebase Console의 Functions 대시보드에서 환경 변수 설정 메뉴를 찾을 수 없습니다.

## 해결 방법

### 방법 1: Google Cloud Console에서 설정 (권장) ⭐

`defineString`을 사용하지 않고 일반 환경 변수를 사용하도록 코드를 수정했습니다.

1. **Google Cloud Console 접속**
   - https://console.cloud.google.com/functions 접속
   - 프로젝트: `michael-jesus` 선택

2. **함수 선택**
   - `processOMR` 함수를 클릭

3. **함수 편집**
   - 상단의 "편집" 버튼 클릭

4. **환경 변수 설정**
   - "환경 변수, 네트워킹, 시간 제한 등" 섹션 클릭
   - "환경 변수" 섹션으로 스크롤
   - "환경 변수 추가" 클릭
   - **이름**: `OMR_SERVICE_URL`
   - **값**: `https://omr-service-51418627624.asia-northeast3.run.app`
   - "저장" 클릭

5. **함수 배포**
   - "배포" 버튼 클릭

### 방법 2: Firebase CLI로 배포 시 설정

```powershell
# 환경 변수와 함께 배포
firebase deploy --only functions --set-env-vars OMR_SERVICE_URL=https://omr-service-51418627624.asia-northeast3.run.app
```

### 방법 3: gcloud CLI로 설정

```powershell
# 함수 업데이트
gcloud functions deploy processOMR `
  --gen2 `
  --region=us-central1 `
  --runtime=nodejs20 `
  --source=functions `
  --entry-point=processOMR `
  --set-env-vars OMR_SERVICE_URL=https://omr-service-51418627624.asia-northeast3.run.app `
  --project=michael-jesus
```

## 확인 방법

설정 후 Functions 로그에서 확인:

```powershell
firebase functions:log --only processOMR
```

로그에 `omrServiceUrl: https://omr-service-...`가 표시되면 성공입니다.

## 현재 코드 상태

코드는 `process.env.OMR_SERVICE_URL`을 직접 읽도록 수정되었습니다.
Google Cloud Console에서 설정한 환경 변수가 자동으로 `process.env`에 주입됩니다.

